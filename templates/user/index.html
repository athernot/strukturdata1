{% extends 'user/layout.html' %}
{% block isi %}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<style>
    .section-bg { background: linear-gradient(135deg, #1a1a1a 0%, #2c3e50 100%); min-height: 100vh; padding: 4rem 0; overflow-x: hidden; }
    .hero-section { text-align: center; padding: 4rem 0; margin-bottom: 2rem; }
    .hero-section h1 { font-size: 3.5rem; font-weight: 700; color: #fff; animation: fadeInDown 1s ease-out; }
    .hero-section p { color: #bfc9d1; font-size: 1.3rem; max-width: 600px; margin: 1rem auto 0; animation: fadeInUp 1s ease-out 0.5s; animation-fill-mode: backwards; }
    .card-interactive { background: linear-gradient(145deg, #2c3e50, #1a1a1a); border: 1px solid #404040; border-radius: 15px; transition: all 0.4s ease; overflow: hidden; display: flex; flex-direction: column; height: 100%; }
    .card-interactive:hover { transform: translateY(-12px) scale(1.03); box-shadow: 0 20px 60px rgba(44, 62, 80, 0.28); border-color: #3498db; }
    .card-interactive .card-img-top { height: 400px; object-fit: cover; }
    .card-interactive .card-body { color: #fff; display: flex; flex-direction: column; flex-grow: 1; }
    .card-interactive .card-title { font-weight: 600; font-size: 1.4rem; }
    .card-interactive .card-text { color: #bfc9d1; flex-grow: 1; }
    .btn-interactive { background: #3498db; border: none; color: #fff; padding: 0.7rem 1.8rem; border-radius: 25px; transition: all 0.3s ease; text-decoration: none; display: inline-block; margin-top: 1rem; font-weight: 600; }
    .modal-dark .modal-content { background: #1e2530; color: #fff; border: 1px solid #3498db; }
    .modal-dark .modal-header { border-bottom: 1.5px solid #3498db; }
    .modal-dark .product-details-list li { margin-bottom: 0.5rem; }
    .modal-dark .product-details-list strong { color: #3498db; }
    @keyframes fadeInDown { from { opacity: 0; transform: translateY(-30px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
</style>

<div class="section-bg">
    <div class="container">
        <div class="hero-section">
            <h1>Define Your Style</h1>
            <p>Discover Curated Collections Where Style Meets Substance.</p>
        </div>

        <div class="row justify-content-center card-container">
            {% if items %}
                {% for item in items %}
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card card-interactive">
                        <img src="{{ item.gambar if item.gambar else 'https://via.placeholder.com/400x400.png?text=No+Image' }}" class="card-img-top" alt="{{ item.nama_barang }}">
                        <div class="card-body text-center">
                            <h5 class="card-title">{{ item.nama_barang }}</h5>
                            <p class="card-text">{{ item.deskripsi if item.deskripsi else 'Deskripsi tidak tersedia.' }}</p>
                            <button class="btn btn-interactive" 
                                    data-bs-toggle="modal" 
                                    data-bs-target="#productModal"
                                    data-title="{{ item.nama_barang }}"
                                    data-img="{{ item.gambar if item.gambar else 'https://via.placeholder.com/400x400.png?text=No+Image' }}"
                                    data-text="{{ item.deskripsi if item.deskripsi else 'Deskripsi tidak tersedia.' }}"
                                    data-id="{{ item.id_barang }}"
                                    data-stock="{{ item.jumlah }}">
                                Quick View
                            </button>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="col-12 text-center text-white-50">
                    <h2>Koleksi Segera Hadir</h2>
                </div>
            {% endif %}
        </div>
    </div>
</div>

<div class="modal fade" id="productModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg modal-dark">
    <div class="modal-content">
      <div class="modal-header"><h5 class="modal-title" id="productModalLabel">Product Details</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-6 mb-3 mb-md-0"><img id="modal-img" src="" class="img-fluid rounded" alt="Product Image"></div>
          <div class="col-md-6 d-flex flex-column justify-content-center">
            <h3 id="modal-title" class="fw-bold"></h3>
            <p id="modal-text"></p>
            <ul class="product-details-list mt-2">
                <li><strong>ID Barang:</strong> <span id="modal-id"></span></li>
                <li><strong>Stok Tersedia:</strong> <span id="modal-stock"></span> unit</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const productModal = document.getElementById('productModal');
    if(productModal) {
      productModal.addEventListener('show.bs.modal', function (event) {
          const button = event.relatedTarget;
          productModal.querySelector('#modal-title').textContent = button.getAttribute('data-title');
          productModal.querySelector('#modal-text').textContent = button.getAttribute('data-text');
          productModal.querySelector('#modal-img').src = button.getAttribute('data-img');
          productModal.querySelector('#modal-id').textContent = button.getAttribute('data-id');
          productModal.querySelector('#modal-stock').textContent = button.getAttribute('data-stock');
      });
    }
});
</script>
{% endblock %}